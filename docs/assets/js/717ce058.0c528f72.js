"use strict";(self.webpackChunkqq_x=self.webpackChunkqq_x||[]).push([[797],{3348:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>a,default:()=>c,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"Guides/Windows-OS","title":"Windows Machines","description":"TL ; DR","source":"@site/docs/Guides/Windows-OS.md","sourceDirName":"Guides","slug":"/Guides/Windows-OS","permalink":"/docs/Guides/Windows-OS","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Windows Machines","desription":"Easy setup of Windows virtual machines on Linux hosts"},"sidebar":"guidesSidebar","next":{"title":"Mac OS Machines","permalink":"/docs/Guides/Mac-OS"}}');var t=n(4848),o=n(8453);const r={sidebar_position:2,title:"Windows Machines",desription:"Easy setup of Windows virtual machines on Linux hosts"},a=void 0,l={},d=[{value:"TL ; DR",id:"tl--dr",level:2},{value:"Guest Installation",id:"guest-installation",level:2},{value:"TPM &amp; Secure Boot",id:"tpm--secure-boot",level:2},{value:"Downloader",id:"downloader",level:2},{value:"Installer",id:"installer",level:2},{value:"Host Problems",id:"host-problems",level:2},{value:"Distros using Apparmor",id:"distros-using-apparmor",level:3},{value:"Mkisofs",id:"mkisofs",level:3},{value:"Guest Virtual Hardware",id:"guest-virtual-hardware",level:3}];function h(e){const s={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h2,{id:"tl--dr",children:"TL ; DR"}),"\n",(0,t.jsx)(s.p,{children:"For Windows VM's from qqX 1.14 (early Oct 2025) onwards:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"the needed drivers and agents will ALL auto-install and everthing should already be in place"}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"you only need to read the sections on TPM, Secure Boot and on Hardware records"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"For qqX versions 1.12 and 1.13"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["MAKE SURE to follow up the installation by running ",(0,t.jsx)(s.code,{children:"virtio-win-gt-x64.msi"})," which is on the virtio ISO, from inside Windows"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["MAKE SURE Windows finds the ",(0,t.jsx)(s.em,{children:"initial drivers"})," by following the pictures in the ",(0,t.jsx)(s.a,{href:"Windows-OS#installer",children:"installer"})," section"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Install the Virtio guest tools which are also on the ISO."}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Do NOT download the Spice guest tools as they are out of date."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"guest-installation",children:"Guest Installation"}),"\n",(0,t.jsx)(s.p,{children:"Creating Windows Virtual Machines is fairly straightforward but quirks can appear from time to time, either from upstream code changes at Quickemu or from server changes at Microsoft."}),"\n",(0,t.jsxs)(s.p,{children:["QuickEmu's ",(0,t.jsx)(s.a,{href:"https://github.com/quickemu-project/quickemu/issues/1475",children:"Windows Installer issue"})," has been fixed, here, for qqX users, for quite some time now."]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Following forum work-arounds with re-pasted scripts and notes saying ",(0,t.jsx)(s.em,{children:"'its quite hacky.. Why this works? No idea..'"})," is not good practice. Using qqX is a much more complete solution."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Remember that qqX gives you disk management, snapshot recovery tools, and much more ...."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:"https://github.com/user-attachments/assets/c586e2e2-d285-49a2-93c2-2ce506ba2f36",alt:"windows-insider-sdl-1920"})}),"\n",(0,t.jsx)(s.h2,{id:"tpm--secure-boot",children:"TPM & Secure Boot"}),"\n",(0,t.jsxs)(s.p,{children:["If you haven't installed ",(0,t.jsx)(s.code,{children:"swtpm"})," then see the ",(0,t.jsx)(s.a,{href:"/docs/Installation#tpm",children:"tpm notes"})]}),"\n",(0,t.jsx)(s.p,{children:"Secure Boot is controlled by the .conf file and should normally be set to 'off'."}),"\n",(0,t.jsx)(s.p,{children:"However, early 2025 insider betas are now showing this needs to be set to 'on' and early tests are showing seemingly successful outcomes from the secure boot check routine."}),"\n",(0,t.jsx)(s.p,{children:"That said, this particular update in question fails to follow through on the boot level section. Possibly due to a number reasons, including that the 'beta' software itself, which introduces WiFi-7, in fact has problems of its own ..."}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:"https://github.com/user-attachments/assets/e3df3e84-7570-47ca-bd8d-d649b394d412",alt:"win-insider- sb-upd"})}),"\n",(0,t.jsx)(s.p,{children:"The making of between stage snapshots is recommended."}),"\n",(0,t.jsx)(s.h2,{id:"downloader",children:"Downloader"}),"\n",(0,t.jsxs)(s.p,{children:["qqX still offers Windows downloads that are not available upstream. Quickemu ",(0,t.jsx)(s.a,{href:"https://github.com/quickemu-project/quickemu/pull/1560",children:"changes"})," to the 'editions' code in early 2025 did help but they are not complete."]}),"\n",(0,t.jsxs)(s.p,{children:["Version 1.12 introduced ",(0,t.jsx)(s.strong,{children:"download resuming"}),". This will work with Microsoft and can be very useful if you have an poor internet connection. You will are only allowed one (or two?) resumes per time-out session but you should still be able to eventually download everything."]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:"https://github.com/user-attachments/assets/f59f5873-207f-4dc6-8dbb-6d2603280334",alt:"win-dl-select"})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:"https://github.com/user-attachments/assets/8a189902-e1ed-4eba-ab4a-916ebaae43f2",alt:"windows dl qqX"})}),"\n",(0,t.jsx)(s.h2,{id:"installer",children:"Installer"}),"\n",(0,t.jsx)(s.p,{children:"qqX has an option to check and view the Qemu 'invocation' before booting, as shown in following picture"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"use the [v] option from the main menu to set 'verbose mode'"}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"Quickemu will send a key press signal, via socket sendkey, to trigger the CD 'press any key' request."}),"\n",(0,t.jsx)(s.p,{children:"The first dialog screen that you see should ask you to confirm a language:"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:"https://github.com/user-attachments/assets/ee5d6257-967c-42e9-a2fb-7caa97ee3fe1",alt:"win-install-lang"})}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["MAKE SURE to follow up the installation by running ",(0,t.jsx)(s.code,{children:"virtio-win-gt-x64.msi"})," which is on the virtio ISO, from inside Windows"]}),"\n"]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.p,{children:"From qqX 1.14 onwards, this following steps should become automated."}),"\n",(0,t.jsx)(s.p,{children:"For qqX 1.12 and 1.13, you will be taken to an installer 'location' screen where will need to click on the blue 'find hardware' text link:"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:"https://github.com/user-attachments/assets/f9813cbf-d2f9-49cc-838e-adeafea9d38d",alt:"win-hw-select"})}),"\n",(0,t.jsx)(s.p,{children:"Click on 'Browse' and select the Virtio DVD"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:"https://github.com/user-attachments/assets/33c2702b-64ee-4ddf-a7cd-137d20600c38",alt:"win browse virtio"})}),"\n",(0,t.jsx)(s.p,{children:"Select amd64 and w11, or as appropriate"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:"https://github.com/user-attachments/assets/16a14f6f-5b02-4bb1-983c-e57987402447",alt:"win browse select this"})}),"\n",(0,t.jsx)(s.p,{children:"Click on the driver. In this screenshot 'viostor.inf' and then click install."}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:"https://github.com/user-attachments/assets/92419df1-b66b-40cf-9b36-52a801b0042b",alt:"win browse select this"})}),"\n",(0,t.jsx)(s.p,{children:"Everything should then proceed:"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:"https://github.com/user-attachments/assets/e3901646-0642-4234-a5fe-671bb3e374f3",alt:"win-okay"})}),"\n",(0,t.jsx)(s.p,{children:"The other CDROM/DVD (ISO) will contain the spice guest msi's which should have been automatically installed."}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"spice-msi",src:n(8312).A+"",width:"477",height:"116"})}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.p,{children:"For Windows guests:"}),"\n",(0,t.jsxs)(s.p,{children:["For qqX 1.12 and 1.13, the basic tools should normally have been installed via the automated ",(0,t.jsx)(s.code,{children:"unattended.iso"})]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["MAKE SURE to have followed up the installation by running ",(0,t.jsx)(s.code,{children:"virtio-win-gt-x64.msi"})," which is on the virtio ISO"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["The additional ",(0,t.jsx)(s.a,{href:"https://www.spice-space.org",children:"SPICE"})," guest tools are OUT OF DATE and should NOT be used"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Use the additional Virtio guest tools, which are on the ISO"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"virtio-win-drivers-and-agents",src:n(6858).A+"",width:"575",height:"418"})}),"\n",(0,t.jsx)(s.p,{children:"From qqX 1.14 onwards, the needed drivers and agents will ALL auto-install and everthing should already be in place"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"You may have to adjust the display settings for size and scaling ratio."}),"\n"]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsxs)(s.p,{children:["See the qqX docs for ",(0,t.jsx)(s.a,{href:"/docs/Disks-and-Resizing#shared-and-second-drives",children:"Notes on Shared Drives"})," and qqX exclusive sharing features"]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"host-problems",children:"Host Problems"}),"\n",(0,t.jsx)(s.h3,{id:"distros-using-apparmor",children:"Distros using Apparmor"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["For swtpm: Could not open UnixIO socket: Permission denied, see the ",(0,t.jsx)(s.a,{href:"/docs/Installation#tpm",children:"tpm notes"})]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"mkisofs",children:"Mkisofs"}),"\n",(0,t.jsxs)(s.p,{children:["The Quickemu installer uses ",(0,t.jsx)(s.code,{children:"mkisofs"})," to build a Spice msi ISO. See the general ",(0,t.jsx)(s.a,{href:"/docs/Installation#mk-iso-fs",children:"qqX installation notes"})," and the ",(0,t.jsx)(s.a,{href:"https://www.spice-space.org/download/windows",children:"Spice Website"})," if this is causing problems."]}),"\n",(0,t.jsx)(s.p,{children:"Or, as a retro-fix, try"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'mkisofs -J -R -input-charset utf-8 -o "unattended.iso" "unattended/"\n'})}),"\n",(0,t.jsx)(s.p,{children:"from a terminal opened in the Windows VM folder."}),"\n",(0,t.jsx)(s.h3,{id:"guest-virtual-hardware",children:"Guest Virtual Hardware"}),"\n",(0,t.jsx)(s.p,{children:"Remember that Windows is proprietary software and has copy controls."}),"\n",(0,t.jsx)(s.p,{children:"The hard metal rules still apply. If too much hardware changes at once, then Windows will not load."}),"\n",(0,t.jsx)(s.p,{children:"qqX will record the virtual hardware that Windows uses in a log file, in case you need it. The record can be upated via the utils menu, if you make any big changes."}),"\n",(0,t.jsxs)(s.p,{children:["In case of lock-out, the easiest path is to apply an older snapshot but you can also use the hardware record as the basis of a ",(0,t.jsx)(s.a,{href:"../Advanced/Custom-Qemu-boot-parameters",children:"custom boot"})," file."]})]})}function c(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},6858:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/virtio-win-drivers-and-agents-4d91481141d0ebd04738a9dc75fc7c80.png"},8312:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/spice-msi-7877c2379460ab3a90684269ffaa9b63.png"},8453:(e,s,n)=>{n.d(s,{R:()=>r,x:()=>a});var i=n(6540);const t={},o=i.createContext(t);function r(e){const s=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(o.Provider,{value:s},e.children)}}}]);