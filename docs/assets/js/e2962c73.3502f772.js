"use strict";(globalThis.webpackChunkqq_x=globalThis.webpackChunkqq_x||[]).push([[488],{3956:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>c,frontMatter:()=>a,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"Disks-and-Resizing","title":"Disks, Shared Drives, ISO booting and Resizing","description":"How to easily manage Quickemu type qcow2 disks and disk partitions","source":"@site/docs/Disks-and-Resizing.md","sourceDirName":".","slug":"/Disks-and-Resizing","permalink":"/Disks-and-Resizing","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":50,"frontMatter":{"sidebar_position":50,"title":"Disks, Shared Drives, ISO booting and Resizing","description":"How to easily manage Quickemu type qcow2 disks and disk partitions"},"sidebar":"docsSidebar","previous":{"title":"Snapshots and Rollbacks","permalink":"/Snapshots"},"next":{"title":"qqX updates","permalink":"/Updates"}}');var t=s(4848),r=s(8453);const a={sidebar_position:50,title:"Disks, Shared Drives, ISO booting and Resizing",description:"How to easily manage Quickemu type qcow2 disks and disk partitions"},d=void 0,o={},l=[{value:"Everyday Tools",id:"everyday-tools",level:3},{value:"SHARED and SECOND DRIVES",id:"shared-and-second-drives",level:2},{value:"Improved SDL methods",id:"improved-sdl-methods",level:3},{value:"RESIZING",id:"resizing",level:2},{value:"Partioning and formatting",id:"partioning-and-formatting",level:2},{value:"BOOTING from ISO&#39;s",id:"booting-from-isos",level:2},{value:"ACCESS",id:"access",level:2},{value:"Transferring virtual machines",id:"transferring-virtual-machines",level:2}];function h(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h3,{id:"everyday-tools",children:"Everyday Tools"}),"\n",(0,t.jsx)(n.p,{children:"qqX will automatically run disk health checks in the background and alert you if there are problems."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://github.com/qqxproject/qqX/assets/3956806/7edf972c-3c18-4f33-8096-2c1cbc5ba4f5",alt:"disk error alert crop"})}),"\n",(0,t.jsxs)(n.p,{children:["You are also able to ",(0,t.jsx)(n.em,{children:"mount and view qcow2 virtual machine drives"})," using the host's file manager"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-text",children:" [qf] | [qqf]  open a qcow2 drive in file manager   [f]  open VM folder\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Click here to ",(0,t.jsx)(n.a,{href:"https://qqxproject-org.translate.goog/docs/Translation/Disk-Management-menus?_x_tr_sl=auto&_x_tr_tl=it&_x_tr_hl=en&_x_tr_pto=wapp",children:"Google Auto-Translate these Screenshots"})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://github.com/user-attachments/assets/91cc82cd-1d89-4824-a7be-b9466bef7a81",alt:"qqX-qcow2-mount-in-filemanager"})}),"\n",(0,t.jsx)(n.p,{children:"Right click to VIEW INSIDE any VM disk"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"view-inside-qcow2-VM-in-filemanager",src:s(7965).A+"",width:"1280",height:"868"})}),"\n",(0,t.jsx)(n.h2,{id:"shared-and-second-drives",children:"SHARED and SECOND DRIVES"}),"\n",(0,t.jsx)(n.p,{children:"Access to sharing is connected to the display interface."}),"\n",(0,t.jsx)(n.p,{children:"CURRENTLY THERE ARE TWO MAIN ACCESS AND DISPLAY METHODS: SDL and Spice"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"SDL is much faster, crisper and generally to be preferred"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"The standard QUICKEMU METHOD for shared drives is via Spice:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Spice software has now become generally OUT OF DATE and unmaintained"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"The display tends to be rather blurry and the sharing has become unreliable"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"It is intended to be used with X11, not with Wayland which distros are now adopting ..."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["When it works, it allows a generally easy bi-directional access to the folder ",(0,t.jsx)(n.code,{children:"$HOME/Public"})]}),"\n",(0,t.jsx)(n.p,{children:"It also has a desktop to desktop copy/paste feature for text and for files, which can be useful"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["For ",(0,t.jsx)(n.strong,{children:"Linux guests"}),", you should also install the ",(0,t.jsx)(n.code,{children:"spice-vdagent"})," package, from a terminal on the guest distro, via dnf, apt etc"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["See ",(0,t.jsx)(n.a,{href:"https://www.spice-space.org/download.html",children:"SPICE"})," for software and more details, if needed."]}),"\n",(0,t.jsx)(n.h3,{id:"improved-sdl-methods",children:"Improved SDL methods"}),"\n",(0,t.jsx)(n.p,{children:"qqX takes things a stage further and allows you to create an further type of Shared Drive:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"qqX drives work in all display modes"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Open the [u] Utils menu:"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-text",children:"[2c]  create [2d] delete a second virtual hard-drive   [3c] create [3m] unmount shared drive (guest boot)\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"qqX will auto-install the SHARED DRIVE parameters for you, in the general settings file, and will enable auto-mount."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Stage by stage help is given on screen but this link to the ",(0,t.jsx)(n.a,{href:"Translation/Disk-Management-menus#creating-a-shared-or-extra-drive",children:"translation shared drive help screens"})," may assist."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Copy and paste should further improve when ",(0,t.jsx)(n.a,{href:"FAQs-and-Help#sdl-vs-spicy",children:"SDL 3"})," works its way through into the display systems"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"SECOND DRIVES are installed in much the same way."}),"\n",(0,t.jsx)(n.p,{children:"These are focused at individual distros, so qqX will generate auto-mounting via the .conf file."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"A Second drive is a quick way to expand an individual VM's storage."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"The .conf file entry may be copied to other distros, to extend further sharing capabilities."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"BETWEEN DRIVE DATA TRANSFER"}),"\n",(0,t.jsxs)(n.p,{children:["Either: Use the ",(0,t.jsx)(n.a,{href:"Disks-and-Resizing#everyday-tools",children:"QF"})," function to mount drives in a file manager, followed by simple copy and paste"]}),"\n",(0,t.jsx)(n.p,{children:"Or: Start one of the distros, or specific distro, in Spice mode, and do similar"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.p,{children:["For ",(0,t.jsx)(n.strong,{children:"Windows guests:"})]}),"\n",(0,t.jsxs)(n.p,{children:["With qqX 1.12 and 1.13, the basic tools should normally have been installed via the automated ",(0,t.jsx)(n.code,{children:"unattended.iso"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["MAKE SURE to have followed up the installation by running ",(0,t.jsx)(n.code,{children:"virtio-win-gt-x64.msi"})," which is on the virtio ISO"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Use the additional Virtio guest tools, which are on the ISO and are better maintained than the Spice ones"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"virtio-win-drivers-and-agents",src:s(6858).A+"",width:"575",height:"418"})}),"\n",(0,t.jsx)(n.p,{children:"From qqX 1.14 onwards, the needed drivers and agents will ALL auto-install and everthing should already be in place"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"resizing",children:"RESIZING"}),"\n",(0,t.jsx)(n.p,{children:"Ideally the Virtual Machine should have been allocated a generous size from the outset. But things aren't always that way ..."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"disk-size-analysis-and-snapshot-management",src:s(7547).A+"",width:"952",height:"848"})}),"\n",(0,t.jsx)(n.p,{children:"Select the VM in the normal way and open the Utils menu [u]"}),"\n",(0,t.jsx)(n.p,{children:"Use the [disk] option to resize. Stage by stage help will be given."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["See this link to the disk resize ",(0,t.jsx)(n.a,{href:"Translation/Disk-Management-menus#disk-tidying-and-repair",children:"translation help screens"}),", and others."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"To mount Second drives, followed up by adjustments using Gparted from INSIDE the Linux VM."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Gparted will auto-detect the change in envelope size and auto offer to 'fix' things.  KDE partition manager may not do this and will need the partition deleting in order to reach the new envelope size. This software is not always installed and may need to be added."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"A workaround for KDE distros can be to copy the disks to a Gnome based distro VM folder, then mount them as Gnome second drives. Even a simple Live ISO is sufficient, as long as the .conf has the Drive added to it."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"This workaround should function with main drives too, including Windows."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Or not. Sometimes only Windows will fix NTFS, even if Gparted has already done the main lifting. Windows has 'Check and repair' plus 'Defrag' and Trim functions that can fix things sometimes where others can't."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://github.com/user-attachments/assets/4a338f4b-25d7-488e-9f69-10410012dcfb",alt:"shared-ntfs-checked-defragged-windows"})}),"\n",(0,t.jsx)(n.h2,{id:"partioning-and-formatting",children:"Partioning and formatting"}),"\n",(0,t.jsx)(n.p,{children:"For new disks, just like any new hard drive or disk, and just like when a distro is installed, we need to initialize things."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"If not present, you will need to install a partion table and will need to create and format at least one partition."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Older disks may already have been initialized."}),"\n",(0,t.jsx)(n.p,{children:"Work on NON-bootable partions may be carried out from INSIDE a virtual machine, which makes mounting of drives easy."}),"\n",(0,t.jsxs)(n.p,{children:["Otherwise you will need to boot from an independent ",(0,t.jsx)(n.a,{href:"Disks-and-Resizing#booting-from-isos",children:"boot ISO."})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Use Gparted, Gnome Disks, or similar"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"To create the partition table using Gparted, select 'Devices' from the top menu. Normally select GPT."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"For WINDOWS VMs, the drive should be created as GPT and formatted as NTFS."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Set up NTFS drives using a Linux OS and Gparted but optimize (defrag) the disk using Windows"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"See resize notes for mounting workarounds"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["MAC OS, older than and including 10.13 Mojave 2018 ",(0,t.jsx)(n.em,{children:"might"})," need a flag IN THE .CONF FILE to stop possible drive conflicts."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["See ",(0,t.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/MacOS_version_history",children:"https://en.wikipedia.org/wiki/MacOS_version_history"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:'Quickemu code has the following MacOs note: "VirtIO Block Media doesn\'t work in High Sierra (at all) or the Mojave (Recovery Image)"\nDevelopment tests with Mojave show both a Shared NTFS and a Second APFS to be working.'}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Thus, SET MacLegacyDrive as =\"true\" to load Second Drive (& not Shared) as 'ide-hd' instead of 'virtio-blk-pci'"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"The Shared Drive will always load as 'virtio-blk-pci'"}),"\n",(0,t.jsx)(n.h2,{id:"booting-from-isos",children:"BOOTING from ISO's"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"An in-menu ISO boot is now possible from version 1.9.03"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"And a space saving shared Boot ISO option is now possible from 1.11.05 onwards"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"See the [iso] utility from the main menu."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["By pressing the 'esc' key during initial boot, you can access the Tiano boot manager and boot from any 'live boot' ISO, such as the one from ",(0,t.jsx)(n.a,{href:"https://gparted.org/download.php",children:"https://gparted.org/download.php"})]}),"\n",(0,t.jsx)(n.h2,{id:"access",children:"ACCESS"}),"\n",(0,t.jsxs)(n.p,{children:["If your drives only have ",(0,t.jsx)(n.code,{children:"root"})," access, the following commands can help give general user permissions:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'sudo chown $USER:$USER "mounted-drive-name"\n\nchmod 775 "mounted-drive-name"\n\n'})}),"\n",(0,t.jsx)(n.p,{children:"Gnome Disks has a neat 'take ownership' option:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://github.com/user-attachments/assets/e81e6933-d5ff-48d4-9e1f-20f65407677e",alt:"second-disk-take-ownership-1280"})}),"\n",(0,t.jsx)(n.h2,{id:"transferring-virtual-machines",children:"Transferring virtual machines"}),"\n",(0,t.jsx)(n.p,{children:"A method of converting VMs from or to lib-virt based environments, such as Gnome Boxes or Virt-Manager, is still a work in progress which is hoped to be resolved."})]})}function c(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},6858:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/virtio-win-drivers-and-agents-4d91481141d0ebd04738a9dc75fc7c80.png"},7547:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/disk-size-analysis-and-snapshot-management-e633e1113daaab06454b0adb8cf118bb.jpg"},7965:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/qf-target-boot-2-86c235a9dab27ab0e445a5bc9955dea5.jpg"},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>d});var i=s(6540);const t={},r=i.createContext(t);function a(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);